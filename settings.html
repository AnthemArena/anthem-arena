<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Settings | Anthem Arena</title>
    <meta name="description" content="Customize your profile, choose your champion avatar, and manage privacy settings for the League Music Tournament.">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/settings.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
        <p id="spinner-text">Loading settings...</p>
    </div>

    <nav id="main-nav"></nav>

    <main class="settings-page">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <h1>‚öôÔ∏è Profile Settings</h1>
                <p class="page-subtitle">Customize your profile and privacy settings</p>
            </div>

            <!-- Current Profile Preview -->
            <div class="profile-preview-card" id="profilePreview">
                <div class="preview-avatar" id="previewAvatar">üéµ</div>
                <div class="preview-info">
                    <div class="preview-username" id="previewUsername">Guest</div>
                    <div class="preview-rank" id="previewRank">Level 1 - New Voter</div>
                    <div class="preview-stats" id="previewStats">
                        <span><i class="fas fa-trophy"></i> 0 votes cast</span>
                    </div>
                </div>
            </div>

            <!-- Settings Form -->
            <form id="settingsForm" class="settings-form">
                
                <!-- Username Section -->
                <div class="settings-section">
                    <h2><i class="fas fa-user"></i> Username</h2>
                    <p class="section-description">Your display name for leaderboards and activity feed</p>
                    <div class="form-group">
                        <label for="usernameInput">Display Name</label>
                        <input 
                            type="text" 
                            id="usernameInput" 
                            placeholder="Enter username..." 
                            maxlength="20"
                            autocomplete="off"
                        />
                        <div class="form-hint">3-20 characters, letters, numbers, and underscores only</div>
                        <div class="form-error" id="usernameError"></div>
                    </div>
                </div>

                <!-- Avatar Section -->
                <div class="settings-section">
                    <h2><i class="fas fa-image"></i> Avatar</h2>
                    <p class="section-description">Choose a League of Legends champion as your avatar</p>
                    
                    <div class="avatar-search-wrapper">
                        <input 
                            type="text" 
                            id="avatarSearch" 
                            placeholder="Search champions..." 
                            autocomplete="off"
                        />
                        <span class="search-icon">üîç</span>
                    </div>
                    
                    <div class="selected-avatar-display" id="selectedAvatarDisplay" style="display: none;">
                        <img id="selectedAvatarImg" src="" alt="Selected avatar" />
                        <span id="selectedAvatarName">No champion selected</span>
                        <button type="button" class="clear-avatar-btn" id="clearAvatarBtn">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="avatar-grid" id="avatarGrid">
                        <!-- Champion grid will be inserted here -->
                    </div>
                </div>

                <!-- Privacy Section -->
                <div class="settings-section">
                    <h2><i class="fas fa-shield-alt"></i> Privacy</h2>
                    <p class="section-description">Control who can see your voting activity</p>
                    
                    <div class="privacy-toggle-group">
                        <label class="toggle-label">
                            <input type="checkbox" id="publicToggle" class="toggle-input" />
                            <span class="toggle-slider"></span>
                            <div class="toggle-info">
                                <strong>Make my votes public</strong>
                                <p>Your votes will appear in the Community Activity feed and leaderboards</p>
                            </div>
                        </label>
                    </div>

                    <div class="privacy-note">
                        <i class="fas fa-info-circle"></i>
                        <p>When public, your username and avatar will be visible. Your votes remain anonymous when private.</p>
                    </div>
                </div>

                <!-- Stats Preview (Read-only) -->
                <div class="settings-section stats-preview">
                    <h2><i class="fas fa-chart-bar"></i> Your Stats</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-icon">üó≥Ô∏è</span>
                            <div class="stat-details">
                                <span class="stat-value" id="totalVotesStat">0</span>
                                <span class="stat-label">Total Votes</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">üî•</span>
                            <div class="stat-details">
                                <span class="stat-value" id="streakStat">0</span>
                                <span class="stat-label">Day Streak</span>
                            </div>
                        </div>
                        <div class="stat-item">
                            <span class="stat-icon">‚≠ê</span>
                            <div class="stat-details">
                                <span class="stat-value" id="xpStat">0</span>
                                <span class="stat-label">Total XP</span>
                            </div>
                        </div>
                    </div>
                    <a href="/my-votes" class="view-full-stats">
                        View Full Stats & History ‚Üí
                    </a>
                </div>

                <!-- Save Button -->
                <div class="form-actions">
                    <button type="submit" class="btn-save">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                    <a href="/my-votes" class="btn-cancel">Cancel</a>
                </div>
            </form>

            <!-- Danger Zone -->
            <div class="danger-zone">
                <h3><i class="fas fa-exclamation-triangle"></i> Danger Zone</h3>
                <p>These actions are permanent and cannot be undone.</p>
                <button class="btn-danger" id="clearProfileBtn">
                    <i class="fas fa-user-slash"></i> Clear Profile Data
                </button>
            </div>
        </div>
    </main>

    <footer id="main-footer"></footer>

    <script type="module" src="/js/settings.js"></script>
</body>
</html>